# AstrBot å¯ä¿¡æ’ä»¶å¸‚åœº

ä¸€ä¸ªåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹(LLM)è‡ªåŠ¨åŒ–å®‰å…¨å®¡è®¡çš„å¯ä¿¡æ’ä»¶å¸‚åœºå¹³å°ã€‚

## ğŸŒŸ ç‰¹æ€§

- **ğŸ”’ è‡ªåŠ¨åŒ–å®‰å…¨å®¡è®¡**: ä½¿ç”¨LLMå¯¹æ’ä»¶ä»£ç è¿›è¡Œå…¨é¢çš„å®‰å…¨åˆ†æ
- **ğŸ”„ æŒç»­ç›‘æ§**: é€šè¿‡GitHub Webhookè‡ªåŠ¨ç›‘æ§æ’ä»¶ç‰ˆæœ¬æ›´æ–°
- **ğŸ‘¥ å¼€å‘è€…å‹å¥½**: ç®€å•çš„GitHub OAuthç™»å½•å’Œæ’ä»¶æäº¤æµç¨‹
- **ğŸ“Š é€æ˜åº¦**: è¯¦ç»†çš„å®¡è®¡æŠ¥å‘Šå’ŒçŠ¶æ€å±•ç¤º
- **ğŸš€ ç°ä»£æŠ€æœ¯æ ˆ**: Next.js + NestJS + PostgreSQL + Redis

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚    Backend      â”‚    â”‚   External      â”‚
â”‚   (Next.js)     â”‚â—„â”€â”€â–ºâ”‚   (NestJS)      â”‚â—„â”€â”€â–ºâ”‚   Services      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                        â”‚
                              â–¼                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                    â”‚   PostgreSQL    â”‚                â”‚
                    â”‚   Database      â”‚                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
                              â”‚                        â”‚
                              â–¼                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                    â”‚     Redis       â”‚                â”‚
                    â”‚  (Task Queue)   â”‚                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
                              â”‚                        â”‚
                              â–¼                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                    â”‚  Async Worker   â”‚                â”‚
                    â”‚  (Code Audit)   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker & Docker Compose
- Node.js 20+ (å¯é€‰ï¼Œç”¨äºæœ¬åœ°å¼€å‘)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd astrbot-plugin-marketplace
```

### 2. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env.local

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡
```

### 3. GitHub OAuthè®¾ç½®

1. è®¿é—® [GitHub Developer Settings](https://github.com/settings/applications/new)
2. åˆ›å»ºOAuthåº”ç”¨ï¼š
   - Homepage URL: `http://localhost:3000`
   - Callback URL: `http://localhost:3001/auth/github/callback`
3. å°†Client IDå’ŒSecretæ·»åŠ åˆ° `backend/.env`

### 4. å¯åŠ¨åº”ç”¨

```bash
# å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.dev.yml up --build

# ç”Ÿäº§ç¯å¢ƒ
docker-compose up --build
```

### 5. è®¿é—®åº”ç”¨

- å‰ç«¯: http://localhost:3000
- åç«¯API: http://localhost:3001
- å¥åº·æ£€æŸ¥: http://localhost:3001/health

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¯¹äºè®¿å®¢

1. è®¿é—®ä¸»é¡µæµè§ˆå·²å®¡æ ¸çš„æ’ä»¶
2. ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šæ’ä»¶
3. æŸ¥çœ‹æ’ä»¶è¯¦æƒ…å’Œå®‰å…¨çŠ¶æ€
4. ç‚¹å‡»é“¾æ¥è®¿é—®GitHubä»“åº“

### å¯¹äºå¼€å‘è€…

1. ç‚¹å‡»"Developer Dashboard"ä½¿ç”¨GitHubç™»å½•
2. é€‰æ‹©è¦æäº¤çš„ä»“åº“
3. ç¡®ä¿ä»“åº“æ ¹ç›®å½•åŒ…å« `metadata.yaml` æ–‡ä»¶ï¼š

```yaml
name: your_plugin_name
author: your_username
version: 1.0.0
description: æ’ä»¶æè¿°
repo: "https://github.com/username/repository"
```

4. æäº¤æ’ä»¶ç­‰å¾…å®¡æ ¸
5. ç³»ç»Ÿä¼šè‡ªåŠ¨å®‰è£…Webhookç›‘æ§ç‰ˆæœ¬æ›´æ–°

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ backend/                 # NestJSåç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ plugins/        # æ’ä»¶ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ audits/         # å®¡è®¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ llm/            # LLMæœåŠ¡æŠ½è±¡
â”‚   â”‚   â””â”€â”€ users/          # ç”¨æˆ·ç®¡ç†
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/               # Next.jså‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/    # å…±äº«ç»„ä»¶
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml     # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ docker-compose.dev.yml # å¼€å‘ç¯å¢ƒ
â””â”€â”€ README.md
```

### æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨æ•°æ®åº“æœåŠ¡
docker-compose up postgres redis

# åç«¯å¼€å‘
cd backend
npm install
npm run start:dev

# å‰ç«¯å¼€å‘
cd frontend
npm install
npm run dev
```

### è¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
npm run test

# å‰ç«¯æµ‹è¯•
cd frontend
npm run test
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **ä»£ç å®¡è®¡**: LLMåˆ†ææ’ä»¶æºä»£ç æ£€æµ‹å®‰å…¨æ¼æ´
- **ç‰ˆæœ¬ç›‘æ§**: è‡ªåŠ¨æ£€æµ‹æ–°ç‰ˆæœ¬å¹¶é‡æ–°å®¡è®¡
- **è®¿é—®æ§åˆ¶**: GitHub OAuthè®¤è¯å’Œæƒé™ç®¡ç†
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- **CORSé…ç½®**: ä¸¥æ ¼çš„è·¨åŸŸè®¿é—®æ§åˆ¶

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

- å¥åº·æ£€æŸ¥ç«¯ç‚¹: `/health`
- åº”ç”¨æ—¥å¿—: Dockerå®¹å™¨æ—¥å¿—
- æ•°æ®åº“ç›‘æ§: PostgreSQLæ€§èƒ½æŒ‡æ ‡
- ä»»åŠ¡é˜Ÿåˆ—: Redisé˜Ÿåˆ—çŠ¶æ€

## ğŸ¤ è´¡çŒ®

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—](DEPLOYMENT.md)
2. æ£€æŸ¥ [æ•…éšœæ’é™¤](DEPLOYMENT.md#æ•…éšœæ’é™¤) éƒ¨åˆ†
3. æäº¤ [Issue](../../issues)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] æ’ä»¶è¯„åˆ†å’Œè¯„è®ºç³»ç»Ÿ
- [ ] æ›´å¤šLLMæä¾›å•†æ”¯æŒ
- [ ] æ’ä»¶ä¾èµ–åˆ†æ
- [ ] APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- [ ] æ’ä»¶ä½¿ç”¨ç»Ÿè®¡
- [ ] å¤šè¯­è¨€æ”¯æŒ
